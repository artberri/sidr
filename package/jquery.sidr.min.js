/*! Sidr - v1.1.1 - 2013-05-24
 * https://github.com/artberri/sidr
 * Copyright (c) 2013 Alberto Varela; Licensed MIT */
(function(t){var e=!1,i=!1,o={isUrl:function(t){var e=RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return e.test(t)?!0:!1},loadContent:function(t,e){t.html(e)},addPrefix:function(t){var e=t.attr("id"),i=t.attr("class");"string"==typeof e&&""!==e&&t.attr("id",e.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-id-$1")),"string"==typeof i&&""!==i&&"sidr-inner"!==i&&t.attr("class",i.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-class-$1")),t.removeAttr("style")},execute:function(o,n,s){"function"==typeof n?(s=n,n="sidr"):n||(n="sidr");var d,a,l,c=t("#"+n),f=t(c.data("body")),u=t("html"),p=c.data("width"),h=c.data("speed"),y=c.data("side");if("open"===o||"toogle"===o&&!c.is(":visible")){if(c.is(":visible")||e)return;if(i!==!1)return r.close(i,function(){r.open(n)}),void 0;e=!0,"left"===y?(d={left:p},a={left:"0px"}):(d={right:p},a={right:"0px"}),l=u.scrollTop(),u.css("overflow-x","hidden").scrollTop(l),f.css({width:"100%",position:"absolute"}).animate(d,h),c.width(p).css("display","block").animate(a,h,function(){e=!1,i=n,"function"==typeof s&&s(n)})}else{if(!c.is(":visible")||e)return;e=!0,"left"===y?(d={left:0},a={left:"-"+p}):(d={right:0},a={right:"-"+p}),l=u.scrollTop(),u.removeAttr("style").scrollTop(l),f.animate(d,h),c.animate(a,h,function(){c.removeAttr("style").width(p).css(y,"-"+p),f.removeAttr("style"),t("html").removeAttr("style"),e=!1,i=!1,"function"==typeof s&&s(n)})}}},r={open:function(t,e){o.execute("open",t,e)},close:function(t,e){o.execute("close",t,e)},toogle:function(t,e){o.execute("toogle",t,e)}};t.sidr=function(e){return r[e]?r[e].apply(this,Array.prototype.slice.call(arguments,1)):"function"!=typeof e&&"string"!=typeof e&&e?(t.error("Method "+e+" does not exist on jQuery.sidr"),void 0):r.toogle.apply(this,arguments)},t.fn.sidr=function(e){var i=t.extend({name:"sidr",width:260,speed:200,side:"left",source:null,renaming:!0,body:"body"},e),n=i.name,s=t("#"+n),d="number"==typeof i.width?i.width+"px":i.width;if(0===s.length&&(s=t("<div />").attr("id",n).appendTo(t("body"))),s.addClass("sidr").addClass(i.side).width(d).css(i.side,"-"+d).data({speed:i.speed,side:i.side,body:i.body,width:d}),"function"==typeof i.source){var a=i.source(n);o.loadContent(s,a)}else if("string"==typeof i.source&&o.isUrl(i.source))t.get(i.source,function(t){o.loadContent(s,t)});else if("string"==typeof i.source){var l="",c=i.source.split(",");if(t.each(c,function(e,i){l+='<div class="sidr-inner">'+t(i).html()+"</div>"}),i.renaming){var f=t("<div />").html(l);f.find("*").each(function(e,i){var r=t(i);o.addPrefix(r)}),l=f.html()}o.loadContent(s,l)}else null!==i.source&&t.error("Invalid Sidr Source");return this.each(function(){var e=t(this),i=e.data("sidr");i||(e.data("sidr",n),e.click(function(t){t.preventDefault(),r.toogle(n)}))})}})(jQuery);