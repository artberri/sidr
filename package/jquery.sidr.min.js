/*! Sidr - v1.1.1 - 2013-05-24
 * https://github.com/artberri/sidr
 * Copyright (c) 2013 Alberto Varela; Licensed MIT */
(function(e){var t=!1,n=!1,o={isUrl:function(e){var t=RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return t.test(e)?!0:!1},transitions:function(){var e=document.body||document.documentElement,t=e.style,n=!1,o="transition";if(o in t)n=!0;else{var s,r=["moz","webkit","o","ms"];o=o.charAt(0).toUpperCase()+o.substr(1),n=function(){for(var e=0;r.length>e;e++)if(s=r[e],s+o in t)return!0;return!1}(),o=n?"-"+s.toLowerCase()+"-"+o.toLowerCase():null}return{supported:n,property:o}}(),loadContent:function(e,t){e.html(t)},addPrefix:function(e){var t=e.attr("id"),n=e.attr("class");"string"==typeof t&&""!==t&&e.attr("id",t.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-id-$1")),"string"==typeof n&&""!==n&&"sidr-inner"!==n&&e.attr("class",n.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-class-$1")),e.removeAttr("style")},execute:function(r,i,a){"function"==typeof i?(a=i,i="sidr"):i||(i="sidr");var d,l,c,u,f=e("#"+i),p=e(f.data("body")),h=e("html"),y=f.data("width"),m=f.data("speed"),v=f.data("side"),g=o.transitions;if("open"===r||"toogle"===r&&!f.hasClass("open")){if(f.hasClass("open")||t)return;if(n!==!1)return s.close(n,function(){s.open(i)}),void 0;t=!0,"left"===v?(d={left:y},l={left:"0px"}):(d={right:y},l={right:"0px"}),c=h.scrollTop(),h.css("overflow-x","hidden").scrollTop(c),u=function(){t=!1,n=i,"function"==typeof a&&a(i)},p.addClass("sidr-open-"+v),f.addClass("open").width(y)}else{if(!f.hasClass("open")||t)return;t=!0,"left"===v?(d={left:0},l={left:"-"+y}):(d={right:0},l={right:"-"+y}),u=function(){f.removeClass("open").removeAttr("style").width(0).css(v,"-"+y),p.removeClass("sidr-open-"+v).removeAttr("style"),e("html").removeAttr("style"),t=!1,n=!1,"function"==typeof a&&a(i)},c=h.scrollTop(),h.removeAttr("style").scrollTop(c)}g.supported?(p.css(g.property,v+" "+m/1e3+"s ease"),f.css(g.property,v+" "+m/1e3+"s ease").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",u),p.css(d),f.css(l)):(p.animate(d,m),f.animate(l,m,u))}},s={open:function(e,t){o.execute("open",e,t)},close:function(e,t){o.execute("close",e,t)},toogle:function(e,t){o.execute("toogle",e,t)}};e.sidr=function(t){return s[t]?s[t].apply(this,Array.prototype.slice.call(arguments,1)):"function"!=typeof t&&"string"!=typeof t&&t?(e.error("Method "+t+" does not exist on jQuery.sidr"),void 0):s.toogle.apply(this,arguments)},e.fn.sidr=function(t){var n=e.extend({name:"sidr",width:260,speed:200,side:"left",source:null,renaming:!0,body:"body"},t),r=n.name,i=e("#"+r),a="number"==typeof n.width?n.width+"px":n.width;if(0===i.length&&(i=e("<div />").attr("id",r).appendTo(e("body"))),i.addClass("sidr").addClass(n.side).width(a).css(n.side,"-"+a).data({speed:n.speed,side:n.side,body:n.body,width:a}),i.width(0),"function"==typeof n.source){var d=n.source(r);o.loadContent(i,d)}else if("string"==typeof n.source&&o.isUrl(n.source))e.get(n.source,function(e){o.loadContent(i,e)});else if("string"==typeof n.source){var l="",c=n.source.split(",");if(e.each(c,function(t,n){l+='<div class="sidr-inner">'+e(n).html()+"</div>"}),n.renaming){var u=e("<div />").html(l);u.find("*").each(function(t,n){var s=e(n);o.addPrefix(s)}),l=u.html()}o.loadContent(i,l)}else null!==n.source&&e.error("Invalid Sidr Source");return this.each(function(){var t=e(this),n=t.data("sidr");n||(t.data("sidr",r),t.click(function(e){e.preventDefault(),s.toogle(r)}))})}})(jQuery);